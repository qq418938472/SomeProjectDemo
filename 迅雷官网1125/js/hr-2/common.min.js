!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery)}(function(e){"use strict";var r=0;e.support.cors?e.postForm=e.ajax:e.postForm=function(o){if(!o.url)throw new Error("非法url");var n=o.data||{};if(!e.isPlainObject(n))throw new Error("非法数据");var t,i,a,c=(o.url,e.isFunction(o.success)?o.success:e.noop()),s=e.isFunction(o.error)?o.error:e.noop();t=e('<form style="display:none;"></form>'),a=/\?/.test(o.url)?"&":"?",r+=1,i=e('<iframe src="javascript:false;" name="iframe-transport-'+r+'" style="display:none;" scrolling="no" frameborder="0"></iframe>'),e.each(n,function(r,o){e('<input name="'+r+'" type="text" value="'+o+'" />').appendTo(t)}),o.redirect&&e('<input name="redirect" type="text" value='+o.redirect+" />").appendTo(t),t.prop("target",i.prop("name")).prop("action",o.url).prop("method","post").append(i).appendTo(document.body),i.unbind("load").bind("load",function(){var r;try{if(r=i.contents(),!r.length||!r[0].firstChild)throw new Error}catch(o){r=void 0}void 0===r?s():c(e.parseJSON(decodeURIComponent(i.get(0).contentWindow.location.search.slice(1)))),e('<iframe src="javascript:false;"></iframe>').appendTo(t),window.setTimeout(function(){t.remove()},0)}).bind("error abort",function(){i&&i.unbind("load").prop("src","javascript".concat(":false;")),t&&t.remove()}),t.submit()}});
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function n(e){if(t.raw)return e;try{e=decodeURIComponent(e.replace(i," "))}catch(n){e=unescape(e)}return e}function o(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")),e=n(e);try{return t.json?JSON.parse(e):e}catch(o){}}var i=/\+/g,t=e.cookie=function(i,r,c){if(void 0!==r){if(c=e.extend({},t.defaults,c),"number"==typeof c.expires){var a=c.expires,u=c.expires=new Date;u.setDate(u.getDate()+a)}return r=t.json?JSON.stringify(r):String(r),document.cookie=[t.raw?i:encodeURIComponent(i),"=",t.raw?r:encodeURIComponent(r),c.expires?"; expires="+c.expires.toUTCString():"",c.path?"; path="+c.path:"",c.domain?"; domain="+c.domain:"",c.secure?"; secure":""].join("")}for(var f=document.cookie.split("; "),p=i?void 0:{},d=0,s=f.length;d<s;d++){var m=f[d].split("="),x=n(m.shift()),l=m.join("=");if(i&&i===x){p=o(l);break}i||(p[x]=o(l))}return p};t.defaults={},e.removeCookie=function(n,o){return void 0!==e.cookie(n)&&(e.cookie(n,"",e.extend({},o,{expires:-1})),!0)}});
!function(r){function t(r){var t=[];for(var e in r)t.push(e+"="+r[e]);return t.join("&")}var e=function(r){if(!(this instanceof e)){var t=new e(r);return t}r=r||location.href,this.url=r,this.parse()};e.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","domain","port","relative","path","directory","file","query","anchor"],query:/(?:^|&)([^&=]*)=?([^&]*)/g,parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},e.prototype.parse=function(r){r=r||this.url;for(var t=e.options,i=t.parser[t.strictMode?"strict":"loose"].exec(r),o=14;o--;)this[t.key[o]]=i[o]||""},e.prototype.getQueryData=function(r){var t={};return this.query.replace(e.options.query,function(r,e,i){e&&(t[e]=i)}),r?t[r]:t},e.prototype.getHashData=function(r){var t={};return this.anchor.replace(e.options.query,function(r,e,i){e&&(t[e]=i)}),r?t[r]:t},e.prototype.setQuery=function(r){var e,i=this.getQueryData(),o=!1;for(var s in r)r[s]!==i[s]&&(i[s]=r[s],o=!0);if(o){if(e=t(i),""!==this.query){var a=/\?([^#]*)/;this.url=this.url.replace(a,"?"+e)}else this.url=this.url+"?"+e;this.parse()}return this},e.prototype.setHash=function(r){var e,i=this.getHashData(),o=!1;for(var s in r)r[s]!==i[s]&&(i[s]=r[s],o=!0);if(o){if(e=t(i),""!==this.anchor){var a=/#(.*)/;this.url=this.url.replace(a,"#"+e)}else this.url=this.url+"#"+e;this.parse()}return this},r.URLParser=r.URLParser||e}(window);
function cellrepalce(i,e,t){for(var r in i){var o=new RegExp("\\$"+r,"g");e=t?e.replace(o,$("<i>").text(t(r,i[r],i)||"").html()):e.replace(o,$("<i>").text(i[r]||"").html())}return e}function getQueryString(i){var e=new RegExp("(^|&)"+i+"=([^&]*)(&|$)","i"),t=window.location.search.substr(1).match(e);return null!=t?unescape(t[2]):null}function checkBrowser(i){var e={},t=browserType,r=i||ua;for(var o in t)"object"==typeof t[o]&&(e[o]=t[o].test(r));return e.safari=e.safari&&!e.chrome,void 0==window.ActiveXObject&&void 0!==window.ActiveXObject&&(e.ie11=!0),e}function getVersion(){var i;if(browserType.edge){var e=/edge\D?([\d.]+)/i,t=ua.match(e);t&&(i=parseInt(t[1]))}else if(browserType.chrome){var e=/Chrome\D?([\d.]+)/,t=ua.match(e);t&&(i=parseInt(t[1]))}else if(browserType.safari){var e=/version\D?([\d.]+)/i,t=ua.match(e);t&&(i=parseFloat(t[1]))}return i||($.browser?$.browser.version:"heigh")}function resetInputFIle(i){var e=$(i);checkBrowser().ie?e.replaceWith(e.clone(!0)):e.val("")}function stopPreEvent(i){var e=i||window.event;e.preventDefault?e.preventDefault():e.returnValue=!1}function stopProEvent(i){var e=i||window.event;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function hasSupport(i,e){var t=i,r=document.createElement(e);return t in r}var topApp={basePath:"http://svr.campus.xunlei.com/"},ua=window.navigator.userAgent,browserType={ie:/MSIE/,edge:/edge/i,firefox:/firefox/i,chrome:/chrome/i,opera:/opera/i,safari:/safari/i,webkit:/webkit/i,gecko:/gecko/i,ios:/iPad|iPhone|iPod/,mac:/mac/i,android:/Android/,windowsphone:/Windows Phone/,windows:/Windows/,phone:/mobile|phone/i,pad:/iPad/,linux:/Linux/};js={lang:{}},js.lang.String=function(){this.REGX_HTML_ENCODE=/"|&|'|<|>|[\x00-\x20]|[\x7F-\xFF]|[\u0100-\u2700]/g,this.REGX_HTML_DECODE=/&\w+;|&#(\d+);/g,this.REGX_TRIM=/(^\s*)|(\s*$)/g,this.HTML_DECODE={"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" ","&quot;":'"',"©":""},this.encodeHtml=function(i){return i=void 0!=i?i:this.toString(),"string"!=typeof i?i:i.replace(this.REGX_HTML_ENCODE,function(i){var e=i.charCodeAt(0),t=["&#"];return e=32==e?160:e,t.push(e),t.push(";"),t.join("")})},this.decodeHtml=function(i){var e=this.HTML_DECODE;return i=void 0!=i?i:this.toString(),"string"!=typeof i?i:i.replace(this.REGX_HTML_DECODE,function(i,t){var r=e[i];return void 0==r&&(r=isNaN(t)?i:String.fromCharCode(160==t?32:t)),r})},this.trim=function(i){return i=void 0!=i?i:this.toString(),"string"!=typeof i?i:i.replace(this.REGX_TRIM,"")},this.endsWith=function(i){return!(null==i||""==i||0==this.length||i.length>this.length)&&(i=void 0!=i?i:this.toString(),this.match(i+"$")==i)},this.startsWith=function(i){return!(null==i||""==i||0==this.length||i.length>this.length)&&(i=void 0!=i?i:this.toString(),this.match("^"+i)==i)},this.hashCode=function(){var i,e=this.__hash__;if(void 0==e||0==e){e=0;for(var t=0,r=this.length;t<r;t++)i=this.charCodeAt(t),e=31*e+i,e&=e;e=2147483647&e}return this.__hash__=e,this.__hash__}},js.lang.String.call(String.prototype),$(function(){$("a[href$='#']").attr("href","javascript:void(0);"),$(".f_top a").click(function(){$(window).scrollTop(0)}),$(".pic_user").hover(function(){$(".user_drop").show()},function(){}),$(".ico_weixin").hover(function(){$(".drop_code").css("display","block")},function(){$(".drop_code").css("display","none")}),$("#s_login").click(function(){$(".cover").show(),$("#s_registerDiv").hide(),$("#s_forgetpwdDiv").hide(),$("#s_loginDiv").show()}),$("#s_register,.go_register").click(function(){$(".cover").show(),$("#s_loginDiv").hide(),$("#s_forgetpwdDiv").hide(),$("#s_registerDiv").show()}),$(".go_findPwd").click(function(){$(".cover").show(),$("#s_loginDiv").hide(),$("#s_registerDiv").hide(),$("#s_forgetpwdDiv").show()}),$(".s_mailHead").click(function(){location.href="####"}),$(".tipAlertExchange .pop_close").click(function(){$(".cover").hide(),$(".tipAlertExchange").hide()})});
var Tools=function(){var Tools={};return Tools.getUrlParam=function(key){var query=location.search,reg="/^.*[\\?|\\&]"+key+"\\=([^\\&]*)/";reg=eval(reg);var ret=query.match(reg);return null!=ret?decodeURIComponent(ret[1]):""},Tools.getCookie=function(e){try{return null==document.cookie.match(new RegExp("(^"+e+"| "+e+")=([^;]*)"))?"":decodeURIComponent(RegExp.$2)}catch(o){return null==document.cookie.match(new RegExp("(^"+e+"| "+e+")=([^;]*)"))?"":RegExp.$2}},Tools.setCookie=function(e,o,n,t){if(t||(t=location.hostname),arguments.length>2){var r=new Date((new Date).getTime()+parseInt(60*n*1e3));document.cookie=e+"="+escape(o)+"; path=/; domain="+t+"; expires="+r.toGMTString()}else document.cookie=e+"="+escape(o)+"; path=/; domain="+t},Tools.hasLogin=function(){var e=Tools.getCookie("xl_campus_uuid");return 41===e.length},Tools.ajaxCall=function(e,o,n,t){var r="http://svr.campus.xunlei.com/"+encodeURI(e);t=t||{},$.get(r,t,function(e){0==e.errno?o&&o(e):n&&n(e)},"jsonp")},Tools.activeNav=function(e){var o=$("#nav a");o.removeClass("cur"),o.eq(e).addClass("cur")},Tools.showUser=function(){var e=$("#logined"),o=$("#logined .pic_user"),n=$("#userinfo"),t=null;Tools.hasLogin()&&(e.show(),$("#loginInfoContainer").hide(),$("#username").prop("title",Tools.getCookie("xl_campus_account")),$("#username").html(Tools.getCookie("xl_campus_account")),o.hover(function(){n.show()},function(){t=setTimeout(function(){n.hide()},800)}),n.hover(function(){clearTimeout(t)},function(){n.hide()}),$("#logout").on("click",function(){return Tools.setCookie("xl_campus_uuid","",-1),location.reload(),!1})),Tools.replaceHtml=function(e){return""!=e&&e?(e=e.replace(/</g," "),e=e.replace(/>/g," ")):e},Tools.dereplaceHtml=function(e){return""!=e&&e?(e=e.replace(/</g," "),e=e.replace(/>/g," "),e=e.replace(/\n/g,"<br/>")):e}},Tools}();
var onInputChange=function(t){function n(n,e,i){this.element=n,this.$element=t(n),this.value=n.value,this._callback=e,this.options=t.extend({time:100},i),t(n).on("focus",t.proxy(this._listen,this)),t(n).on("blur",t.proxy(this._unlisten,this))}var e="oninput"in document.createElement("input");return n.prototype={_listen:function(){return e?this.$element.on("input",t.proxy(this._run,this)):this._interval=window.setInterval(t.proxy(this._check,this),this.options.time),!0},_unlisten:function(){return e?this.$element.off("input",this._run):window.clearInterval(this._interval),!0},_run:function(){this.value=this.element.value;var n=t.proxy(this._callback,this.element);n(this.value)},_check:function(){this.element.value!=this.value&&this._run()}},t.fn.onInputChange=function(t,e){return this.each(function(){new n(this,t,e)})},{Constructor:n,support:e}}(window.jQuery);!function(t){"use strict";var n={required:"不能为空。",minLength:"字符长度不够。",maxLength:"字符超长。",mobile:"非法的电话号码。",email:"非法的邮箱。",chineseName:"非法的中文名。",idCard:"非法的身份证号。"},e=/^[0-9]+$/,i=/^(13[0-9]|15[0-9]|18[0-9]|14[0-9])\d{8}$/,r=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,u=/^[\u4E00-\u9FA5]{2,}(?:·[\u4E00-\u9FA5]{1,})*$/,a=/(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}[X|x|0-9]$)|(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)/,s={required:function(n){return n=t.trim(n),""!==n&&null!==n},number:function(t){return e.test(t)},minLength:function(t,n){return!!e.test(n)&&t.length>=parseInt(n,10)},maxLength:function(t,n){return!!e.test(n)&&t.length<=parseInt(n,10)},mobile:function(t){return i.test(t)},email:function(t){return r.test(t)},chineseName:function(t){return u.test(t)},idCard:function(t){return a.test(t)}};t.validate=s,t.fn.validate=function(n){var e,i=t.trim(t(this).val()),r=s[n];if(!t.isFunction(r))throw new Error("can't find this validate type:"+n);switch(n){case"minLength":var u=this.attr("data-min-length");if(void 0===u||null===u)throw new Error("can't find attribute data-min-length");e=r(i,u);break;case"maxLength":var a=this.attr("data-max-length");if(void 0===a||null===a)throw new Error("can't find attribute data-max-length");e=r(i,a);break;default:e=r(i)}return e},t.fn.monitor=function(e,i){i=t.isFunction(i)?i:t.noop;var r=/\s+/,u=this;return this.on("change.validate",function(){for(var t=e.split(r),a={code:"success",msg:[]},s=0,o=t.length;s<o;s++)u.validate(t[s])||(a.code="fail",a.msg.push({type:t[s],message:n[t[s]]}));i(a)}),this}}(jQuery);
!function(t){function e(e,r){return t(".cover").show(),t(".tipAlert .txt_result").text(e),"success"==r?t(".tipAlert .ico_face").removeClass("face2").addClass("face1"):t(".tipAlert .ico_face").removeClass("face1").addClass("face2"),t(".tipAlert").show(),!1}var r=function(){return{init:function(){this.initUI(),this.bindEventHandlers()},bindEventHandlers:function(){t("#goLoginBtn").on("click",function(){location.href="http://campus.xunlei.com/personal_center.html"}),t(".tipAlert .pop_close").click(function(){"重置成功，请用新密码登录"==t(".tipAlert .txt_result").text()?location.href="http://campus.xunlei.com/personal_center.html":(t(".tipAlert").hide(),t(".cover").hide())}),t("#reGetPassword").on("click",function(){var r=t("#s_user_email").val();if(!t.validate.email(r))return e("请填写正确的邮箱地址","fail"),!1;var i={account:r};t.ajax({url:"http://svr.campus.xunlei.com/reset_req?callback=?",timeout:5e3,dataType:"json",data:i,error:function(){e("密码重置失败","fail")},success:function(t){0==t.errno?e("重置成功,请登录邮箱进行确认","success"):14==t.errno?e("密码重置失败，该账号不存在","fail"):e("密码重置失败:"+t.errno,"fail")}})}),t("#resetPassword").on("click",function(){var r=t.trim(t("#modify_pwd").val()),i=t.trim(t("#repeat_pwd").val());if(!t.validate.required(r))return e("请填写新密码","fail"),!1;if(!t.validate.required(i))return e("请填写确认密码","fail"),!1;if(r!=i)return e("两次密码不匹配","fail"),!1;var n=URLParser(),a=n.getQueryData("authcode"),c={pwd:r,authcode:a};t.ajax({url:"http://svr.campus.xunlei.com/reset_pwd?callback=?",timeout:5e3,dataType:"json",data:c,error:function(){e("密码重置失败","fail")},success:function(r){0==r.errno?(t(document).on("popWindowHide",function(){location.href="http://campus.xunlei.com/login.html"}),e("重置成功，请用新密码登录","success")):e("密码重置失败:"+r.errno,"fail")}})})},initUI:function(){},alertMsg:function(e){return t(".cover").show(),t(".tipAlert .txt_result").text(e),t(".tipAlert").show(),!1}}}();t(document).ready(function(){r.init()})}(jQuery);
!function(){function o(){var s=$.trim(t.val()),c=$.trim(l.val());return i.hide(),e.test(s)?c.length<6?(i.html("密码长度必须大于等于6").show(),l.focus(),!1):($("#remember").find(".ico_chk").hasClass("checked")?Tools.setCookie("isrember",!0,43200):Tools.setCookie("isrember",""),r.off("click",o),1==a&&(Tools.setCookie("remaccount",s,43200),Tools.setCookie("rempwd",s+"()"+c,43200)),Tools.ajaxCall("login?account="+s+"&pwd="+c+"&from=pc",function(o){o&&"1"==o.cityerrno&&"1"!=o.workslinkErrno?($(".cover").show(),$("#s_loginDiv").hide(),$(".tipAlertExchange .txt_result").html("请前往个人中心再次确认您的交流会城市"),$(".tipAlertExchange").show()):o&&"1"!=o.cityerrno&&"1"==o.workslinkErrno?($(".cover").show(),$("#s_loginDiv").hide(),$(".tipAlertExchange .txt_result").html("请前往个人中心补充您的作品链接地址"),$(".tipAlertExchange").show()):o&&"1"==o.cityerrno&&"1"==o.workslinkErrno?($(".cover").show(),$("#s_loginDiv").hide(),$(".tipAlertExchange .txt_result").html("请前往个人中心确认交流会城市和作品链接"),$(".tipAlertExchange").show()):location.reload()},function(e){i.html(e.rtnMsg).show(),r.on("click",o)}),!1):(i.html("邮箱地址不正确").show(),t.focus(),!1)}var e=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,s=!0,r=$("#login"),i=$("#tips_login"),t=$('#s_loginDiv input[data-type="email"]'),l=$('#s_loginDiv input[data-type="pass"]'),a=!1;a=Tools.getCookie("isrember")||!1;var c=Tools.getCookie("remaccount"),n=Tools.getCookie("rempwd");if(a&&c&&""!=c){if(t.val(c),n&&""!=n){var h=n.split("()");c==h[0]&&l.val(h[1])}}else t.val(c||"");$("#s_loginDiv .ipt_info").on("focus",function(){var o=$(this);o.parent(".form_box").addClass("focus")}).on("blur",function(){var o=$(this),r=$.trim(o.val()),i=o.parent(".form_box");switch(i.removeClass("focus"),o.data("type")){case"email":s=!e.test(r);break;case"pass":s=r.length<6}s?(i.hasClass("correct")&&(i.removeClass("correct"),o.siblings(".ico_f_ok").remove()),i.hasClass("error")||(i.addClass("error"),i.append('<i class="ico_f_error"></i>'))):(i.hasClass("error")&&(i.removeClass("error"),o.siblings(".ico_f_error").remove()),i.hasClass("correct")||(i.addClass("correct"),i.append('<i class="ico_f_ok"></i>')))}),$("#remember").on("click",function(){var o=$(this),e=o.find(".ico_chk");return e.hasClass("checked")?(a=!1,e.removeClass("checked")):(a=!0,e.addClass("checked")),!1}),r.on("click",o),l.on("keyup",function(e){13===e.keyCode&&o()})}();
!function(){function s(s,r,e){s?(r.hasClass("correct")&&(r.removeClass("correct"),e.siblings(".ico_f_ok").remove()),r.hasClass("error")||(r.addClass("error"),r.append('<i class="ico_f_error"></i>'))):(r.hasClass("error")&&(r.removeClass("error"),e.siblings(".ico_f_error").remove()),r.hasClass("correct")||(r.addClass("correct"),r.append('<i class="ico_f_ok"></i>')))}function r(){var s=$.trim(i.val()),o=$.trim(c.val()),t=$.trim(n.val());return a.hide(),e.test(s)?o.length<6?(a.html("密码长度必须大于等于6").show(),c.focus(),!1):o!==t?(a.html("重复密码不正确").show(),n.focus(),!1):($("#register").off("click",r),Tools.ajaxCall("register?account="+s+"&pwd="+o+"&from=pc",function(s){location.href="/personal_center.html"},function(s){a.html("注册失败").show(),$("#register").on("click",r)}),!1):(a.html("邮箱地址不正确").show(),i.focus(),!1)}var e=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,o="",t=!0,a=$("#tips"),i=$('#s_registerDiv input[data-type="email"]'),c=$('#s_registerDiv input[data-type="pass"]'),n=$('#s_registerDiv input[data-type="repass"]');Tools.hasLogin(),$("#s_registerDiv .ipt_info").on("focus",function(){var s=$(this);s.parent(".form_box").addClass("focus")}).on("blur",function(){var r=$(this),a=$.trim(r.val()),i=r.parent(".form_box");switch(i.removeClass("focus"),r.data("type")){case"email":e.test(a)?($("#tips").hide(),Tools.ajaxCall("exist_account?account="+a,function(e){var o=e.data.num;o>=1?($("#tips").show(),$("#tips").html("此邮箱已注册!"),t=!0,s(t,i,r)):(t=!1,s(t,i,r))},function(e){t=!1,s(t,i,r)})):t=!0,s(t,i,r);break;case"pass":a.length<6?t=!0:(o=a,t=!1),s(t,i,r);break;case"repass":t=""===a||""===o||o!==a,s(t,i,r)}}),$("#register").on("click",r),n.on("keyup",function(s){13===s.keyCode&&r()})}();